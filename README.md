# MVVM Example

---
# Общая реализация

Стартовой сущностью проекта является UIManager. При пробуждении с помощью фабрик он создает стартовую панель с кнопкой "Открыть".
Панели по мере открытия добавляются в стек, чтобы потом можно было реализовать их закрытие с возвратом к предыдущей в том же порядке.

Сами панели - префабы, ссылки на которые хранятся в ScriptableObject в Ресурсах с именем PanelsList.
Сопоставление панелей идет с помощью enum Panels, общего для всех типов сущностей.

После создания модели, в зависимости от типа вызывается метод, открывающий конкретное окно. Попутно он создает ViewModel и View. Как и модель для них есть отдельные фабрики.
Когда все компоненты в сборе, они связываются. После чего окно добавляется в стек.

Фабрика ViewModel получает Model и после создания сущности ViewModel она сразу же подписывается на необходимые изменения в Model
с помощью UniRx.

View сразу при создании уже забинжена своими объектами к полям с помощью Unity-Weld. С помощью SetViewModel, представление подписывается на Action`ы
во ViewModel, реактивно меняя свои поля. Если нужно инициировать действия с моделью, дергаются методы ViewModel.

---
# Выделение ViewModel и Model вне проекта.
Архитектурно реализовать получилось, все что подразумевалось вынести в отдельную библиотеку лежит в папке ToDll. 
Однако при реализации создания DLL возникли трудности - после сборки и добавления в проект Zenject не мог создать экземпляр класса реализующий ItextProvider.
Разобраться не получилось.
[Ссылка](https://github.com/noldowalker/MVVMDLL) на проект со сборкой dll. В текущем проекте нужно перейти на ветку feature/with-dll

---
# Общее впечатление
Было очень интересно, хоть и не просто сразу осваивать новый паттерн и пару новых инструментов одновременно. 
Не очень понятна необходимость в Unity-Weld. Насколько я понял, UniRx позволяет манипулировать и объектами юнити. 
Лично я бы использовал для связи Представления и Представления-Модели так же Uni-Rx. Но, скорее всего, я недостаточно углубился в тему
и использовал Unity-Weld не так, как это предполагалось.

